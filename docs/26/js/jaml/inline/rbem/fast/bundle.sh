#!/bin/bash
# --------------------------------------------------------------------------------
# 複数に分割されたソースコードを一つにまとめる。
# --------------------------------------------------------------------------------
# スクリプトが設置されているディレクトリに移動
cd "$(dirname "$0")"
# 出力先ディレクトリがなければ作成
mkdir -p ./dist
# bun buildコマンドを実行し、その結果を判定
if bun build ./src/main.js --outdir ./dist --target browser; then
  # 成功した場合 (終了コードが0)
  echo "ビルド成功: dist/bundle.js"
else
  # 失敗した場合 (終了コードが0以外)
  # エラーメッセージはbunがstderrに出力するので、ここでは簡潔なメッセージを出す
  echo "ビルドに失敗しました。" >&2
  exit 1
fi
